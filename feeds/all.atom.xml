<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>hella labs</title><link href="https://www.qrk.us/" rel="alternate"/><link href="https://www.qrk.us/feeds/all.atom.xml" rel="self"/><id>https://www.qrk.us/</id><updated>2025-11-20T05:19:39.439773+00:00</updated><subtitle>helpful findings and tech musings</subtitle><entry><title>You can cook dirt?</title><link href="https://www.qrk.us/cooking-dirt.html" rel="alternate"/><published>2024-07-27T00:00:00+00:00</published><updated>2025-11-20T05:19:39.438773+00:00</updated><author><name>Kenneth</name></author><id>tag:www.qrk.us,2024-07-27:/cooking-dirt.html</id><summary type="html">&lt;p&gt;For me, food was always an afterthought. "Ugh. Hungry again. I'll solve that and get back to what I was doing."&lt;/p&gt;
&lt;p&gt;Then I read this book from the 70s by a Japanese farmer who's like the grandfather of permaculture. I wish I could have met him. His name was Masanobu …&lt;/p&gt;</summary><content type="html">&lt;p&gt;For me, food was always an afterthought. "Ugh. Hungry again. I'll solve that and get back to what I was doing."&lt;/p&gt;
&lt;p&gt;Then I read this book from the 70s by a Japanese farmer who's like the grandfather of permaculture. I wish I could have met him. His name was Masanobu Fukuoka.&lt;/p&gt;
&lt;p&gt;Fukuoka-san was walking and noticed rice growing wild. It was thriving. He wondered how much he could grow that way without flooding the paddy or starting seedlings. He soon learned he could yield just as much with less effort, and that was just the beginning. He found all sorts of clever ways to avoid industrializing his farm by paying attention to how things work. He was a hacker.&lt;/p&gt;
&lt;p&gt;He called it "do nothing farming." I live in a different climate with different soil. I probably won't be growing buckwheat or rice, but I can apply his philosophy of paying attention and harmonizing instead of dominating the life around me.&lt;/p&gt;
&lt;p&gt;I figured, "I'm going to need a bunch of dirt." Not soil, per se, but compost as fertilizer. The soil is dense clay here. It doesn't absorb water well.&lt;/p&gt;
&lt;p&gt;You can actually cook dirt. Well, you can "cook" organic matter by composting it, which is to intentionally accelerate decomposition while eliminating odors and weed seeds and other unwanted things. There's more too it than I'd imagined, but not too much.&lt;/p&gt;
&lt;p&gt;So, I'm Farmer Bingham now, I guess.&lt;/p&gt;
&lt;p&gt;I've a few hundred gallons of matter cooking down to teensy pieces out back. I've selected a patch of ground for planting and smothered what was growing there with plastic so I can enrich the soil.&lt;/p&gt;
&lt;p&gt;Soon I'll be amending that bed with my compost and starting some veggies and fruits from seed. There's a lot to know. I made some farmer friends and I'm  hunting for a scobe so I can ferment kombucha. My collection of bottles  for that is growing. I'm hoping to branch out into yoghurt and pickles and kraut too. I love that stuff.&lt;/p&gt;</content><category term="Gardening"/><category term="composting"/></entry><entry><title>Monthly Plan</title><link href="https://www.qrk.us/monthly-plan.html" rel="alternate"/><published>2024-07-27T00:00:00+00:00</published><updated>2025-11-20T05:19:39.438773+00:00</updated><author><name>Kenneth</name></author><id>tag:www.qrk.us,2024-07-27:/monthly-plan.html</id><summary type="html">&lt;p&gt;&lt;img alt="the plot" src="https://github.com/user-attachments/assets/41ff140f-d3be-435f-98ca-478fdfe234f1"&gt;&lt;/p&gt;
&lt;h2 id="july-2024"&gt;July 2024&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Select the Plot&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;I chose a 10x14 full-sun patch of lawn next to the back porch. I deployed a heavy tarp to begin smothering the grass.&lt;/li&gt;
&lt;li&gt;HOA architectural review committee approved the change&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Soil Testing:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Take soil samples and send them for analysis to understand nutrient levels and …&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="the plot" src="https://github.com/user-attachments/assets/41ff140f-d3be-435f-98ca-478fdfe234f1"&gt;&lt;/p&gt;
&lt;h2 id="july-2024"&gt;July 2024&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Select the Plot&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;I chose a 10x14 full-sun patch of lawn next to the back porch. I deployed a heavy tarp to begin smothering the grass.&lt;/li&gt;
&lt;li&gt;HOA architectural review committee approved the change&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Soil Testing:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Take soil samples and send them for analysis to understand nutrient levels and pH.&lt;/li&gt;
&lt;li&gt;Review results to determine any necessary amendments.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I ordered some heirloom seeds from Missouri (&lt;a href="https://www.rareseeds.com/"&gt;rareseeds.com&lt;/a&gt;).&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Seeds&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Carrot Seeds, Oxheart&lt;br&gt;&lt;br&gt;SKU: CR126&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Arugula Seeds, Common&lt;br&gt;&lt;br&gt;SKU: OG106&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Pea Seeds, Sugar Bon Snap&lt;br&gt;&lt;br&gt;SKU: SN115&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Beet Seeds, Bull's Blood&lt;br&gt;&lt;br&gt;SKU: BT101&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Broccoli Seeds, Waltham 29&lt;br&gt;&lt;br&gt;SKU: BR105&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Cabbage Seeds, Golden Acre&lt;br&gt;&lt;br&gt;SKU: CB122&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Cilantro Seeds, Slo-Bolt&lt;br&gt;&lt;br&gt;SKU: HB143&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Cucumber Seeds, Aonaga Jibai&lt;br&gt;&lt;br&gt;SKU: CU120&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Dill Seeds, Elephant&lt;br&gt;&lt;br&gt;SKU: HB180&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Lettuce Seeds, May Queen&lt;br&gt;&lt;br&gt;SKU: LT118&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Okra Seeds, Heavy Hitter&lt;br&gt;&lt;br&gt;SKU: OK114&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Onion Seeds, Yellow Sweet Spanish&lt;br&gt;&lt;br&gt;SKU: ON135&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Onion Seeds, Ishikura Bunching&lt;br&gt;&lt;br&gt;SKU: ON125&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Sweet Pepper Seeds, California Wonder&lt;br&gt;&lt;br&gt;SKU: PP106&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Spinach Seeds, Merlo Nero&lt;br&gt;&lt;br&gt;SKU: SP105&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Tomato Seeds, Cherokee Purple&lt;br&gt;&lt;br&gt;SKU: TP101&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="august-2024"&gt;August 2024&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Planning and Preparation:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Finalize layout, mark boundaries, install corner posts for trellis wires.&lt;/li&gt;
&lt;li&gt;Finalize vegetables to grow and their planting schedule.&lt;/li&gt;
&lt;li&gt;Start acquiring cool-season plants: peas, garlic, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Clearing the Grass:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Add a layer of compost or mulch to begin enriching the soil.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="september-2024"&gt;September 2024&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Planting Cool-Season Crops:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Direct sow seeds for lettuce, spinach, arugula, radishes, carrots, beets, turnips, broccoli, or cabbage.&lt;/li&gt;
&lt;li&gt;Plant peas and garlic.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="october-2024"&gt;October 2024&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Soil Amendments:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Begin adding organic soil amendments based on soil test results (e.g., lime to adjust pH, compost for nutrients).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Maintaining Cool-Season Crops:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Water regularly and ensure proper spacing for optimal growth.&lt;/li&gt;
&lt;li&gt;Mulch around plants to retain moisture and suppress weeds.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="november-2024"&gt;November 2024&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Composting:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Continue adding compost to the plot to improve soil structure and fertility.&lt;/li&gt;
&lt;li&gt;Turn the soil gently if needed to incorporate organic material.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Harvesting Early Crops:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Begin harvesting fast-growing crops like radishes and lettuce.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="december-2024"&gt;December 2024&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Resting the Soil:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Allow the soil to rest and continue to break down organic matter.&lt;/li&gt;
&lt;li&gt;Plan any irrigation systems needed for the garden.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Continued Harvest:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Continue harvesting leafy greens and root vegetables as they mature.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="january-2025"&gt;January 2025&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Tilling and Aerating:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Till the soil to a depth of at least 8-12 inches, breaking up any compacted areas.&lt;/li&gt;
&lt;li&gt;Aerate the soil if necessary to improve drainage and root penetration.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="february-2025"&gt;February 2025&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Final Soil Preparation:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Add a final layer of compost and till it into the soil.&lt;/li&gt;
&lt;li&gt;Level the garden bed and with landscaping rake and create raised rows or mounds depending on plant needs.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="march-2025"&gt;March 2025&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Starting Seeds Indoors:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Begin starting seeds indoors for early crops like tomatoes, peppers, and eggplants.&lt;/li&gt;
&lt;li&gt;Prepare seed trays and place them in a warm, sunny spot or under grow lights.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="april-2025"&gt;April 2025&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Planting Early Crops:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;As the risk of frost diminishes, begin planting early crops like lettuce, spinach, and peas directly into the garden.&lt;/li&gt;
&lt;li&gt;Harden off indoor-started seedlings by gradually exposing them to outdoor conditions.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="may-2025"&gt;May 2025&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Planting Warm-Season Crops:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Transplant warm-season crops like tomatoes, peppers, and eggplants into the garden.&lt;/li&gt;
&lt;li&gt;Direct sow seeds for squash, beans, and cucumbers.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="june-2025"&gt;June 2025&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Garden Maintenance:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Mulch around plants to retain moisture and suppress weeds.&lt;/li&gt;
&lt;li&gt;Begin regular watering and fertilizing as needed.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Trellis?&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Consider installing steel cables between the corner posts as overhead attachment points for suspended plant supports.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="july-2025"&gt;July 2025&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Harvesting and Care:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Continue to care for your garden, harvesting crops as they ripen.&lt;/li&gt;
&lt;li&gt;Monitor for pests and diseases, and manage them organically as needed.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Wildlife Deterrents:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;Consider wrapping the corner posts with hardware cloth or chicken wire as a wildlife barrier.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="resources"&gt;Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/user-attachments/files/16404902/NC-Vegetable-Planting-Guide.pdf"&gt;NCSU Extension - North Carolina Vegetable Planting Guide&lt;/a&gt; (&lt;a href="https://extensiongardener.ces.ncsu.edu/wp-content/uploads/2016/07/NC-Vegetable-Planting-Guide.pdf?fwd=no"&gt;source&lt;/a&gt;) (Thanks, Matthew!)&lt;/li&gt;
&lt;/ul&gt;</content><category term="Gardening"/><category term="planning"/></entry><entry><title>Cleaning up Google Calendar</title><link href="https://www.qrk.us/cleaning-up-google-calendar.html" rel="alternate"/><published>2023-09-24T00:00:00+00:00</published><updated>2025-11-20T05:19:39.439773+00:00</updated><author><name>Kenneth</name></author><id>tag:www.qrk.us,2023-09-24:/cleaning-up-google-calendar.html</id><summary type="html">&lt;p&gt;I stopped using Google Calendar as a primary calendar a few years ago, but I still had a lot of old events in there far into the future. I must have imported the lunar cycle at some point because most of them are named like "New moon" or "Full moon …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I stopped using Google Calendar as a primary calendar a few years ago, but I still had a lot of old events in there far into the future. I must have imported the lunar cycle at some point because most of them are named like "New moon" or "Full moon." I wanted to clean them out so I don't see duplicates in my main calendar when I'm subscribed to the Google Calendar for the sake of events that can only be shared there, but there's no way to do bulk operations with the app or website, so I modified the Google API Python quickstart for Calendar to do it for me.&lt;/p&gt;
&lt;p&gt;The quickstart starts out by listing the next ten events, and authorizes the readonly scope for calendar events. I changed it to authorize the read/write scope, and to find a larger number events, filter for certain titles, and delete them.&lt;/p&gt;
&lt;h3 id="the-steps-i-took"&gt;The Steps I took&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Completed the &lt;a href="https://developers.google.com/calendar/quickstart/python"&gt;Python Quickstart&lt;/a&gt; for the Google Calendar API, and saved the Python program so I could modify it.&lt;/li&gt;
&lt;li&gt;In the Python program, changed the scope to &lt;code&gt;https://www.googleapis.com/auth/calendar.events&lt;/code&gt; so I could delete events.&lt;/li&gt;
&lt;li&gt;Downloaded the JSON credentials file and named it &lt;code&gt;credentials.json&lt;/code&gt; in the same directory as the Python program.&lt;/li&gt;
&lt;li&gt;Ran the Python program, which opened a browser window to authorize the app to access my calendar.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="a-simple-python-program-to-delete-events-by-title"&gt;A Simple Python Program to Delete Events by Title&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Copyright 2018 Google LLC&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;);&lt;/span&gt;
&lt;span class="c1"&gt;# you may not use this file except in compliance with the License.&lt;/span&gt;
&lt;span class="c1"&gt;# You may obtain a copy of the License at&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#     http://www.apache.org/licenses/LICENSE-2.0&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Unless required by applicable law or agreed to in writing, software&lt;/span&gt;
&lt;span class="c1"&gt;# distributed under the License is distributed on an &amp;quot;AS IS&amp;quot; BASIS,&lt;/span&gt;
&lt;span class="c1"&gt;# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;/span&gt;
&lt;span class="c1"&gt;# See the License for the specific language governing permissions and&lt;/span&gt;
&lt;span class="c1"&gt;# limitations under the License.&lt;/span&gt;

&lt;span class="c1"&gt;# [START calendar_quickstart]&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__future__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;print_function&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os.path&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;google.auth.transport.requests&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Request&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;google.oauth2.credentials&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Credentials&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;google_auth_oauthlib.flow&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;InstalledAppFlow&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;googleapiclient.discovery&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;googleapiclient.errors&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HttpError&lt;/span&gt;

&lt;span class="c1"&gt;# If modifying these scopes, delete the file token.json.&lt;/span&gt;
&lt;span class="n"&gt;SCOPES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://www.googleapis.com/auth/calendar.events&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Shows basic usage of the Google Calendar API.&lt;/span&gt;
&lt;span class="sd"&gt;    Prints the start and name of the next 10 events on the user&amp;#39;s calendar.&lt;/span&gt;
&lt;span class="sd"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;creds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;
    &lt;span class="c1"&gt;# The file token.json stores the user&amp;#39;s access and refresh tokens, and is&lt;/span&gt;
    &lt;span class="c1"&gt;# created automatically when the authorization flow completes for the first&lt;/span&gt;
    &lt;span class="c1"&gt;# time.&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;token.json&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;creds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Credentials&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;from_authorized_user_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;token.json&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SCOPES&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# If there are no (valid) credentials available, let the user log in.&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;creds&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;creds&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;valid&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;creds&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;creds&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expired&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;creds&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;refresh_token&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;creds&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;refresh&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Request&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;flow&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;InstalledAppFlow&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;from_client_secrets_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                &lt;span class="s1"&gt;&amp;#39;credentials.json&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SCOPES&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;creds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;flow&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run_local_server&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;# Save the credentials for the next run&lt;/span&gt;
        &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;token.json&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;token&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;token&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;creds&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_json&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;calendar&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;v3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;credentials&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;creds&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="c1"&gt;# Call the Calendar API&lt;/span&gt;
        &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isoformat&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Z&amp;#39;&lt;/span&gt;  &lt;span class="c1"&gt;# &amp;#39;Z&amp;#39; indicates UTC time&lt;/span&gt;
        &lt;span class="c1"&gt;# now = &amp;#39;2035-12-29T00:00:00Z&amp;#39;  # &amp;#39;Z&amp;#39; indicates UTC time&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Getting events named like &amp;quot;moon&amp;quot; from &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;events_result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;events&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;calendarId&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;primary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;timeMin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                              &lt;span class="n"&gt;maxResults&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;999&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;singleEvents&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                              &lt;span class="n"&gt;orderBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;startTime&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;showDeleted&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;events&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;events_result&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[])&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;events&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;No upcoming events found.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt;

        &lt;span class="c1"&gt;# Prints the start and name of the next 10 events&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;events&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;summary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;New moon&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Full moon&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Blue moon&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Deleting &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; (&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;) with status &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; on &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;start&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;dateTime&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;start&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;delete_result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;events&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;calendarId&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;primary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;eventId&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Ignoring &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; (&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;

    &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;HttpError&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;An error occurred: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="c1"&gt;# [END calendar_quickstart]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Tech"/><category term="python"/><category term="googlecalendar"/><category term="googleapis"/></entry><entry><title>Separating Videos from Google Photos</title><link href="https://www.qrk.us/separating-videos-from-google-photos.html" rel="alternate"/><published>2022-03-13T00:00:00+00:00</published><updated>2025-11-20T05:19:39.439773+00:00</updated><author><name>Kenneth</name></author><id>tag:www.qrk.us,2022-03-13:/separating-videos-from-google-photos.html</id><summary type="html">&lt;p&gt;Storage is cheap, but it's not free and 4K home movies use a lot of storage. There's no easy way to find and delete a particular file or type of file in Google Photos, and there's no way to bulk delete with a tool or even the API. Here's a …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Storage is cheap, but it's not free and 4K home movies use a lot of storage. There's no easy way to find and delete a particular file or type of file in Google Photos, and there's no way to bulk delete with a tool or even the API. Here's a simple tool chain that answered my need to move all videos out to cheaper storage so I could reclaim storage space in my Google account.&lt;/p&gt;
&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Table of contents:&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#sync-photos-and-videos"&gt;Sync Photos and Videos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#move-videos"&gt;Move Videos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#delete-all-videos-from-google-photos"&gt;Delete All Videos From Google Photos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#replicated-videos-to-new-storage"&gt;Replicated Videos to New Storage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;Google Photos has some unique talents. I find it useful for exploring my own archives with the built-in machine learning features like "pictures from Ashland" or "red car". The balance of value is less favorable for videos, and they were the only reason I was paying for 2TB of cloud storage, so I decided to prune them out of my Google Photos account.&lt;/p&gt;
&lt;p&gt;Problem: there's no easy way to do that! Even the API doesn't have a delete operation. I can find them easily enough in the app by searching "videos", and I can painstakingly download them and delete them, but let's do this as code so that you can replay the solution and I can remember how it works.&lt;/p&gt;
&lt;h2 id="sync-photos-and-videos"&gt;Sync Photos and Videos&lt;/h2&gt;
&lt;p&gt;I found &lt;code&gt;gphotos-sync&lt;/code&gt; which uses the Google Photos API to download all photos and videos from the account.&lt;/p&gt;
&lt;h2 id="move-videos"&gt;Move Videos&lt;/h2&gt;
&lt;p&gt;I wrote a tiny Python program to to move my videos out of the gphotos-sync directory.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;walk the gphotos-sync photos directory&lt;/li&gt;
&lt;li&gt;detect if a file is a video MIME type&lt;/li&gt;
&lt;li&gt;move the videos to a new folder&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;❯&lt;span class="w"&gt; &lt;/span&gt;python&lt;span class="w"&gt; &lt;/span&gt;./move_videos.py
Moving:&lt;span class="w"&gt; &lt;/span&gt;./2017/02/2017-02-15-they-sang.mp4&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;787&lt;/span&gt;.8MiB&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;./Videos/videos_from_gphotos/2017/02/2017-02-15-they-sang.mp4
Moving:&lt;span class="w"&gt; &lt;/span&gt;./2003/04/or-portland-roofing_residence.3gp&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;849&lt;/span&gt;.1KiB&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;./Videos/videos_from_gphotos/2003/04/or-portland-roofing_residence.3gp
Moving:&lt;span class="w"&gt; &lt;/span&gt;./2003/02/or-ashland-alex_and_ax_blowin_in_the_wind.3gp&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.0MiB&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;./Videos/videos_from_gphotos/1973/02/or-ashland-alex_and_ax_blowin_in_the_wind.3gp
Total:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;58&lt;/span&gt;.7GiB
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;filetype&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;os.path&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;getsize&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dirname&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;walk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;chdir&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;shutil&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;move&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pathlib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;

&lt;span class="c1"&gt;# move_videos.py moves files with a video MIME type to a different top-level directory with the same directory structure&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="c1"&gt;# The top argument for walk&lt;/span&gt;
    &lt;span class="n"&gt;topdir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;./Downloads/from_gphotos/photos&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;dest_topdir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;./Videos/videos_from_gphotos&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;chdir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;topdir&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;total_bytes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dirs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;walk&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_symlink&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;
            &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;filetype&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_video&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
                &lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;getsize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
                &lt;span class="n"&gt;total_bytes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;total_bytes&lt;/span&gt;
                &lt;span class="n"&gt;dest&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dest_topdir&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;./&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
                &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Moving:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;sizeof_fmt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;parent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
                    &lt;span class="n"&gt;parent&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mkdir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;parents&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;exist_ok&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                    &lt;span class="n"&gt;move&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;Exception&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="k"&gt;raise&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;pass&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Total:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sizeof_fmt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total_bytes&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sizeof_fmt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;suffix&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;B&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Ki&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Mi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Gi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Ti&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Ei&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Zi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;abs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mf"&gt;1024.0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;3.1f&lt;/span&gt;&lt;span class="si"&gt;}{&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="si"&gt;}{&lt;/span&gt;&lt;span class="n"&gt;suffix&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;/=&lt;/span&gt; &lt;span class="mf"&gt;1024.0&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;.1f&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;Yi&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;suffix&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id="delete-all-videos-from-google-photos"&gt;Delete All Videos From Google Photos&lt;/h2&gt;
&lt;p&gt;There's a simple trick to do this in a fell swoop.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;search "videos" and make sure the results are all videos&lt;/li&gt;
&lt;li&gt;tick the select box on the first result&lt;/li&gt;
&lt;li&gt;scroll down to the bottom of results&lt;/li&gt;
&lt;li&gt;hold SHIFT and left-click the last result&lt;/li&gt;
&lt;li&gt;click the trash button or press &lt;code&gt;#&lt;/code&gt; to delete&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;As of this writing the videos would be in Trash for 60 days before they're permanently deleted and the available storage returned to you.&lt;/p&gt;
&lt;h2 id="replicated-videos-to-new-storage"&gt;Replicated Videos to New Storage&lt;/h2&gt;
&lt;p&gt;I still need to keep a copy of my videos off-site in case something happens to my storage at home or I lose access for some reason. I didn't want to keep track of copying the files so it needs to be an automated sync.&lt;/p&gt;
&lt;p&gt;I chose &lt;code&gt;rclone&lt;/code&gt; which is a versatile sync tool for cloud storage. It works with S3-compliant APIs, and I found STORJ has a very cheap option and as a bonus it is a form decentralized storage with an open-source bent. Cool.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;I signed up for Storj's free 150GB option and added about 20 USD worth of STORJ tokens to my account to cover future overages. No credit card required.&lt;/li&gt;
&lt;li&gt;I followed &lt;a href="https://docs.storj.io/dcs/how-tos/sync-files-with-rclone/rclone-with-native-integration/"&gt;Storj's own guide&lt;/a&gt; for configuring &lt;code&gt;rclone&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;I added a sync command to my backup script:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;rclone&lt;span class="w"&gt; &lt;/span&gt;sync&lt;span class="w"&gt; &lt;/span&gt;~/Videos/&lt;span class="w"&gt; &lt;/span&gt;storj:videos/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Tech"/><category term="python"/><category term="backup"/><category term="rclone"/><category term="googlephototos"/><category term="googleapis"/></entry><entry><title>Virtual Machines as Code</title><link href="https://www.qrk.us/virtual-machines-as-code.html" rel="alternate"/><published>2022-03-13T00:00:00+00:00</published><updated>2025-11-20T05:19:39.439773+00:00</updated><author><name>Kenneth</name></author><id>tag:www.qrk.us,2022-03-13:/virtual-machines-as-code.html</id><summary type="html">&lt;p&gt;Optimizing for determinism in virtual machines. This approach can be used to vend the same virtual machine image version in many formats e.g. VHD for Azure, Stack, and Hyper-V; OVA for VMware, VirtualBox; QCOW2 for KVM, and of course RAW.&lt;/p&gt;
&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Table of contents:&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#tldr"&gt;TL;DR&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#cloning-vs-code"&gt;Cloning vs Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#choosing-the-upstream-image"&gt;Choosing …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;Optimizing for determinism in virtual machines. This approach can be used to vend the same virtual machine image version in many formats e.g. VHD for Azure, Stack, and Hyper-V; OVA for VMware, VirtualBox; QCOW2 for KVM, and of course RAW.&lt;/p&gt;
&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Table of contents:&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#tldr"&gt;TL;DR&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#cloning-vs-code"&gt;Cloning vs Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#choosing-the-upstream-image"&gt;Choosing the Upstream Image&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#configuring-the-image"&gt;Configuring the Image&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sealing-the-image"&gt;Sealing the Image&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#versioning-the-image"&gt;Versioning the Image&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#releasing-the-image"&gt;Releasing the Image&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#launching-from-the-image"&gt;Launching from the Image&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#upgrading-virtual-machines"&gt;Upgrading Virtual Machines&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;An overview of the steps using Packer,Ansible, and AWS is given as an example.&lt;/p&gt;
&lt;h2 id="tldr"&gt;TL;DR&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Choose a source control manager (SCM) that supports version tagging e.g. Git to house your code and perform the following actions inside the code repository.&lt;/li&gt;
&lt;li&gt;Write a playbook declaring the desired OS configuration. To start, a single Ansible playbook file with several tasks may be sufficient. As your requirements become more complex you’ll employ Ansible roles which are reusable, parameterized configuration.&lt;/li&gt;
&lt;li&gt;Write a Packer template.&lt;/li&gt;
&lt;li&gt;Select the Packer “builder” for the desired VM image format e.g. amazon-ebs.&lt;/li&gt;
&lt;li&gt;Select a trusted upstream image e.g. the Amazon Machine Image (AMI).&lt;/li&gt;
&lt;li&gt;Select a Packer “provisioner” to invoke the configuration playbook e.g. “ansible”.&lt;/li&gt;
&lt;li&gt;Commit the configuration playbook and Packer template to SCM.&lt;/li&gt;
&lt;li&gt;Use a Git tag to “stamp” an immutable version string on the current SCM revision e.g. release-0.1.0.&lt;/li&gt;
&lt;li&gt;Run Packer to “build” the new OS image in the specified format.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="cloning-vs-code"&gt;Cloning vs Code&lt;/h2&gt;
&lt;p&gt;The crucial aim here is a deterministic configuration of a virtual machine from source code. Cloning a disk image reproduces the good, the bad, and the unknown. The starting point for your VM image production pipeline is an upstream, vanilla, verifiable OS image; and the goal is to transform it with code into something useful.&lt;/p&gt;
&lt;h2 id="choosing-the-upstream-image"&gt;Choosing the Upstream Image&lt;/h2&gt;
&lt;p&gt;The obvious choice is the checksum-verified install media from the OS maintainers, but it might make more sense to verify and trust a marketplace vendor, e.g. Rogue Wave Software on Azure, because they provide drivers and tunings for that platform.&lt;/p&gt;
&lt;p&gt;If you require greater assurances or simply want more help with your image you may have more than one stage of upstream image transform that ultimately produces your functional image. One example of a multi-stage approach is to source the upstream image from a trusted vendor, and then to apply an OS hardening Ansible playbook. Alternatively, you could source a hardened OS image from the &lt;a href="https://www.cisecurity.org/services/hardened-virtual-images/"&gt;Center for Internet Security&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Either way, this is a time for diligence in risk management. You’ll want to be certain (enough) that you can verify the chain of custody of the upstream(s) with the rigor that is appropriate for your application.&lt;/p&gt;
&lt;h2 id="configuring-the-image"&gt;Configuring the Image&lt;/h2&gt;
&lt;p&gt;Now that you have a trusted upstream image you’ll set about customizing it for your application. You’ll be glad you used a declarative configuration management system instead of shell scripts, and the fortunate soul that inherits your code too will be grateful. This means that the code that describes the configuration of your OS declares the desired end state e.g. “bind-utils is installed”, and the configuration system takes whatever actions are necessary to effect that state, and reports back whether this was a success with or without any change. In general, this approach offers a more principled approach which brings improved maintainability, strict error handling, debugging tools, and the like. To boot, you’ll probably learn some Python or Ruby along the way. It’s worth it.&lt;/p&gt;
&lt;h2 id="sealing-the-image"&gt;Sealing the Image&lt;/h2&gt;
&lt;p&gt;It’s crucial to scrub and seal the OS before it becomes a reusable image. High-priority items include&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;host SSH identities,&lt;/li&gt;
&lt;li&gt;hardware addresses in network configuration,&lt;/li&gt;
&lt;li&gt;deprovisioning any hypervisor agent e.g. waagent, and&lt;/li&gt;
&lt;li&gt;removing any artifacts of the Packer provisioner(s) e.g. ansible-local requires the playbooks to be uploaded to the prototype VM.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="versioning-the-image"&gt;Versioning the Image&lt;/h2&gt;
&lt;p&gt;Before you run Packer to produce a new OS image, you’ll want to stamp the SCM repo that’s housing all this configuration with an immutable release version string e.g. &lt;code&gt;git tag release-0.1.0&lt;/code&gt;. Ideally, this same string is stamped somewhere in the OS of the resultant image e.g. &lt;code&gt;/etc/release&lt;/code&gt; and is also in the metadata e.g. entity tags of public cloud images like an AMI. Tagging is a feature of Packer’s “amazon-ebs” builder.&lt;/p&gt;
&lt;h2 id="releasing-the-image"&gt;Releasing the Image&lt;/h2&gt;
&lt;p&gt;Most likely, this OS image you’re releasing will eventually become part of a release kit of many versioned components that together compose the full application stack. Importantly, releases are always immutable, and it is at this point that the OS image is “released” to and consumed by the stack. Any further features and fixes will be new release versions. Likewise, you’ll always be able to build an OS image with the current version by checking out the SCM tag on which it was originally built e.g. &lt;code&gt;git checkout release-0.1.0&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id="launching-from-the-image"&gt;Launching from the Image&lt;/h2&gt;
&lt;p&gt;The new OS image should be referenced by its version string when launched by the application or a infrastructure-as-code provisioning tool like Terraform. This probably means some kind of lookup table that resolves the version string to the image ID. For example, if you used Packer’s “amazon-ebs” provisioner to assign an AMI tag “ImageVersion=release-0.1.0”, then you could find the AMI with that tag in a particular region with aws CLI.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;aws&lt;span class="w"&gt; &lt;/span&gt;ec2&lt;span class="w"&gt; &lt;/span&gt;describe-images&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;–filters&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;owner-id,Values&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$AWS_ACCOUNT_ID&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;–filters&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;tag:ImageVersion,Values&lt;span class="o"&gt;=&lt;/span&gt;release-0.1.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id="upgrading-virtual-machines"&gt;Upgrading Virtual Machines&lt;/h2&gt;
&lt;p&gt;You’ll have to judge whether your application is best served by an in-place upgrade or turn-and-burn. The advantages of latter are enabled by a stack architecture that abstracts away persistence from the purview of the VM. If you can see a path forward to that end, then “Go West”. If you are forced to manage in-place upgrades then an aggressive always-latest-stable kind of strategy works best, and tools like Salt Stack are your friends.&lt;/p&gt;</content><category term="Tech"/><category term="packer"/><category term="ansible"/><category term="terraform"/><category term="devops"/><category term="iaas"/></entry><entry><title>Securing AWS Credentials</title><link href="https://www.qrk.us/securing-aws-credentials.html" rel="alternate"/><published>2018-05-19T00:00:00+00:00</published><updated>2025-11-20T05:19:39.439773+00:00</updated><author><name>Kenneth</name></author><id>tag:www.qrk.us,2018-05-19:/securing-aws-credentials.html</id><summary type="html">&lt;p&gt;A single &lt;a href="https://github.com/joho/aws-pony"&gt;rogue npm module&lt;/a&gt;, Ruby gem, PyPi module, or ill-fated cURL command could expose you (and your employer) to extreme risk.&lt;/p&gt;
&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Table of contents:&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#is-this-you"&gt;Is this you?&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#the-problem"&gt;The Problem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#a-solution"&gt;A Solution&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#do-it-yourself"&gt;Do it Yourself&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#shortcuts"&gt;Shortcuts&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#enable-privileges"&gt;Enable Privileges&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#disable-privileges"&gt;Disable Privileges&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#assume-role"&gt;Assume Role&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#related"&gt;Related&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="is-this-you"&gt;Is this you?&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# ~/.aws/credentials&lt;/span&gt;
&lt;span class="k"&gt;[default]&lt;/span&gt;
&lt;span class="na"&gt;aws_access_key_id …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;A single &lt;a href="https://github.com/joho/aws-pony"&gt;rogue npm module&lt;/a&gt;, Ruby gem, PyPi module, or ill-fated cURL command could expose you (and your employer) to extreme risk.&lt;/p&gt;
&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Table of contents:&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#is-this-you"&gt;Is this you?&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#the-problem"&gt;The Problem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#a-solution"&gt;A Solution&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#do-it-yourself"&gt;Do it Yourself&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#shortcuts"&gt;Shortcuts&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#enable-privileges"&gt;Enable Privileges&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#disable-privileges"&gt;Disable Privileges&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#assume-role"&gt;Assume Role&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#related"&gt;Related&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="is-this-you"&gt;Is this you?&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# ~/.aws/credentials&lt;/span&gt;
&lt;span class="k"&gt;[default]&lt;/span&gt;
&lt;span class="na"&gt;aws_access_key_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;AKIAIH7UMBRMK5L7GT2Q&lt;/span&gt;
&lt;span class="na"&gt;aws_secret_access_key&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;kyLQmrtPwdXrXdxiAOjS1v0zrR06CiEzKKWXIRum&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;p&gt;If you have this file it is probably so that you can use the credentials with awscli or another command-line utility, or so that you can test a native build of your application that calls AWS in an IDE or when invoked by a build tool such as Maven. We'll explore a specific case as representative of a broad class of vulnerabilities, specifically how a sensitive file could be stolen and how you can make that prohibitively difficult.&lt;/p&gt;
&lt;h3 id="the-problem"&gt;The Problem&lt;/h3&gt;
&lt;p&gt;You are vulnerable to the theft and misuse of your AWS identity if:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;you lose your non-encrypted computer disk where the file is stored, or&lt;/li&gt;
&lt;li&gt;a malicious process designed to steal this credential runs on your computer.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This attack is not unique to AWS, of course. Many development and systems administration tools follow the same pattern of issuing an API token as a primary trust factor. Proper handling of these token is too often an afterthought, and we can only surmise that the implications of that carelessness are truly not appreciated by a significant number of software developers. &lt;a href="https://www.cyberscoop.com/twilio-api-eavesdropper-vulnerability/"&gt;The discovery that hundreds of mobile apps had hard-coded API keys for the Twilio platform&lt;/a&gt; is evidence of the same.&lt;/p&gt;
&lt;p&gt;Suppose your employer requires full-disk encryption for all company-provided equipment. In that case a loss of custody of your portable development machine; while inconvenient and frustrating and definitely a security incident; is not a situation worsened by the further implications of a data leak or identity theft. Even with that considerable degree of protection in place, there is another constellation of attack vectors not at all mitigated by full-disk encryption. How many times have your downloaded a utility or app directly from the author or vendor by pasting a &lt;code&gt;curl&lt;/code&gt; or &lt;code&gt;wget&lt;/code&gt; command into your terminal or downloaded an executable or package file? In every case this action implies the delegation of your own privileges on that computer to whomever authored the code that you just executed.&lt;/p&gt;
&lt;p&gt;Your computer doesn't know the difference between you and your logged-in user, and it's that user that owns all of your files and runs all of your processes. That user mostly runs programs written by people other than you. Those programs, running as your user, could read and upload your AWS credentials or any other file for that matter if the source code were maliciously modified to do so. There would be no barrier to that malicious code reading the file, initiating the egressing network connection, nor any tell.&lt;/p&gt;
&lt;p&gt;Importantly, it is possible to dramatically reduce the scope of code that you actually trust in order to operate normally.&lt;/p&gt;
&lt;h3 id="a-solution"&gt;A Solution&lt;/h3&gt;
&lt;p&gt;You can store secrets safely on disk with encryption, decrypt just-in-time to use them normally, and destroy the plaintext.&lt;/p&gt;
&lt;p&gt;Here's a way to do this with PGP that doesn't require you to type a passphrase every time you wish to read the plaintext. With this approach access to the plaintext is controlled by the GnuPG agent and OS login keyring.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;This applies to Bourne-compat shells on file-based OSs e.g. BASH and ZSH on MacOS or Linux&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;❯&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;&lt;span class="o"&gt;(&lt;/span&gt;gpg&lt;span class="w"&gt; &lt;/span&gt;-qd&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials.gpg&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;p&gt;The plaintext of this file is shellcode like...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;AWS_ACCESS_KEY_ID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;AKIAJS7UXB9INMRXLOEA
&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;AWS_SECRET_ACCESS_KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;vXHZEOVxrBtqMkmadkJv0mCeEglrlFA5oBEywSFw
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;
...which makes these values available in the current process environment as well as any child processes' environments. This reduces the surface area for attack by eliminating attack vectors based on filesystem semantics. It is still possible on some operating systems for any process running as &lt;em&gt;you&lt;/em&gt; to read the environment variable with which future child processes are invoked, but those processes are likely to be short-lived and will have unpredictable process IDs which are needed to address the process environment directly. Basically, this makes lifting the credential from your computer difficult.&lt;/p&gt;
&lt;h3 id="do-it-yourself"&gt;Do it Yourself&lt;/h3&gt;
&lt;p&gt;Composing your own encrypted credentials file requires only free, open-source utilities that run on file-based OSs like Linux, MacOS. I'll assume you are using a Bourne-compat shell e.g. BASH, ZSH. You're on your own for API-based OSs like Windows, but I believe this same approach could work there as well. If you get it working and send me the recipe I'll post it here.&lt;/p&gt;
&lt;p&gt;These steps will allow you to continue using the Default Credential Provider chain in AWS SDKs, boto3/awscli, etc...&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Install and configure GnuPG command-line interface (CLI) for your OS. I'll assume this will also provide the GnuPG agent which is typically included with modern, trusted GPG packages. &lt;a href="http://blog.ghostinthemachines.com/2015/03/01/how-to-use-gpg-command-line/"&gt;This blog post&lt;/a&gt; looks like a good place to start.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;You will need the user ID (UID) e.g. alice@example.com that you choose in this step in a later step.&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Use GnuPG CLI &lt;code&gt;gpg&lt;/code&gt; to create an identity aka PGP private key. Github has &lt;a href="https://help.github.com/articles/generating-a-new-gpg-key/"&gt;a helpful post&lt;/a&gt; about this.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Install the AWS CLI which we'll use to verify these steps work. Amazon covers this &lt;a href="https://aws.amazon.com/cli/"&gt;on their web site&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If you have more than one credential in &lt;em&gt;~/.aws/credentials&lt;/em&gt; then copy each to a separate file with a meaningful name e.g. &lt;em&gt;~/.aws/credentials-example.com&lt;/em&gt; and perform the next step for each file.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Edit the plaintext file &lt;em&gt;~/.aws/credentials&lt;/em&gt; so that it resembles the example above. You can manually insert the &lt;code&gt;export&lt;/code&gt; command at the beginning of the two lines and convert the variables names to uppercase or you can run this command which does precisely that in the terminal to prepare the file for encryption.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;❯&lt;span class="w"&gt; &lt;/span&gt;sed&lt;span class="w"&gt; &lt;/span&gt;-E&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/^\[.*\]$/d&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;         &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;s/^(\s+)?(aws_(secret_)?access_key(_id)?)(\s+)?=(\s+)?/export \U\2=\E/g&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;         &lt;/span&gt;-i&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Encrypt the credentials file for your user ID (typically the email address you entered when the PGP identity was generated).&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# this command creates a new file with the same filename as the plaintext + suffix &amp;quot;.gpg&amp;quot;&lt;/span&gt;
❯&lt;span class="w"&gt; &lt;/span&gt;gpg&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;-&lt;span class="o"&gt;{&lt;/span&gt;u,r&lt;span class="o"&gt;}&lt;/span&gt;alice@example.com&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Prove you can decrypt.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;❯&lt;span class="w"&gt; &lt;/span&gt;gpg&lt;span class="w"&gt; &lt;/span&gt;-qd&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials.gpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;
If this is the first time you have used your PGP identity you may see a GUI popup in your OS prompting for your passphrase. If your OS+GnuPG agent integration allows you may at this time also save the passphrase in your OS keyring. This probably means that your passphrase is chained to your OS login password, and so you should protect that login password with the same measures that are appropriate for your AWS credential.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Source the plaintext into your shell environment and use the credential to authenticate.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;❯&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;&lt;span class="o"&gt;(&lt;/span&gt;gpg&lt;span class="w"&gt; &lt;/span&gt;-qd&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials.gpg&lt;span class="o"&gt;)&lt;/span&gt;

❯&lt;span class="w"&gt; &lt;/span&gt;aws&lt;span class="w"&gt; &lt;/span&gt;iam&lt;span class="w"&gt; &lt;/span&gt;get-user
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;If you will be switching between multiple credentials with this method then simply source the plaintext from separate files.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;❯&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;&lt;span class="o"&gt;(&lt;/span&gt;gpg&lt;span class="w"&gt; &lt;/span&gt;-qd&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials-example.com.gpg&lt;span class="o"&gt;)&lt;/span&gt;
❯&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;&lt;span class="o"&gt;(&lt;/span&gt;gpg&lt;span class="w"&gt; &lt;/span&gt;-qd&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials-example.org.gpg&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Now you can delete the plaintext file. If you are feeling less than confident about your future ability to decrypt with your PGP identity then, as a fallback option, consider changing the filemode on the plaintext credentials file so that elevated privileges are required to read it.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;❯&lt;span class="w"&gt; &lt;/span&gt;rm&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials
&lt;span class="c1"&gt;# alternatively, make the file unreadable by unprivileged processes&lt;/span&gt;
❯&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;chown&lt;span class="w"&gt; &lt;/span&gt;root&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials
❯&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;chmod&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0600&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;h2 id="shortcuts"&gt;Shortcuts&lt;/h2&gt;
&lt;h3 id="enable-privileges"&gt;Enable Privileges&lt;/h3&gt;
&lt;p&gt;There's no need to memorize the terminal commands. You can save a shellcode "alias" or create a shellcode function to assume any AWS identity for which you have encrypted credentials.&lt;/p&gt;
&lt;p&gt;First, lets look at the most simple case where you have exactly one AWS credential encrypted with the above procedure in &lt;em&gt;~/.aws/credentials.gpg&lt;/em&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# save the following alias in your aliases dotfile or shell runcom file e.g. ~/.bashrc&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;onaws&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;source &amp;lt;(gpg -qd ~/.aws/credentials.gpg)&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# alternatively, you could make this default AWS credential available in every new shell&lt;/span&gt;
&lt;span class="c1"&gt;# environment by including the source command in the shell rc file&lt;/span&gt;
&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;&lt;span class="o"&gt;(&lt;/span&gt;gpg&lt;span class="w"&gt; &lt;/span&gt;-qd&lt;span class="w"&gt; &lt;/span&gt;~/.aws/credentials.gpg&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# source the shell rc file (this happens automatically for your next terminal session)&lt;/span&gt;
❯&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;~/.bashrc

&lt;span class="c1"&gt;# then exec the alias to assume the AWS identity&lt;/span&gt;
❯&lt;span class="w"&gt; &lt;/span&gt;onaws
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;p&gt;If instead you have multiple AWS identities you could use a shellcode function and a file naming convention to quickly assume any one identity.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# save the following function in your aliases dotfile or shell runcom file e.g. ~/.bashrc&lt;/span&gt;
onaws&lt;span class="o"&gt;(){&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nb"&gt;local&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;CREDFILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/.aws/credentials
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;[[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-eq&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;]]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;CREDFILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;CREDFILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;-&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;1&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;.gpg
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;||&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;CREDFILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;CREDFILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;.gpg
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;[[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-r&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$CREDFILE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$CREDFILE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;]]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;&lt;span class="o"&gt;(&lt;/span&gt;gpg&lt;span class="w"&gt; &lt;/span&gt;-qd&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$CREDFILE&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;||&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ERROR: &lt;/span&gt;&lt;span class="nv"&gt;$CREDFILE&lt;/span&gt;&lt;span class="s2"&gt; is not readable, or is nonexistent or empty; bye.&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# source the shell rc file (this happens automatically for your next terminal session)&lt;/span&gt;
❯&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;~/.bashrc

&lt;span class="c1"&gt;# then exec the function with a positional parameter matching the filename to assume a particular&lt;/span&gt;
&lt;span class="c1"&gt;# AWS identity e.g. stored in ~/.aws/credentials-example.com.gpg&lt;/span&gt;
❯&lt;span class="w"&gt; &lt;/span&gt;onaws&lt;span class="w"&gt; &lt;/span&gt;example.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;h3 id="disable-privileges"&gt;Disable Privileges&lt;/h3&gt;
&lt;p&gt;You may wish to immediately nullify any credentials and session tokens in memory. You're relatively safe if you end the process where the credentials were sourced, but if for some reason it is preferable for that process to continue running you can explicitly unset the variables with a command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# save the following alias in your aliases dotfile or shell runcom file e.g. ~/.bashrc&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;noaws&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;unset AWS_ACCESS_KEY \&lt;/span&gt;
&lt;span class="s2"&gt;                   AWS_ACCESS_KEY_ID \&lt;/span&gt;
&lt;span class="s2"&gt;                   AWS_SECRET_ACCESS_KEY \&lt;/span&gt;
&lt;span class="s2"&gt;                   AWS_SECURITY_TOKEN \&lt;/span&gt;
&lt;span class="s2"&gt;                   AWS_SESSION_TOKEN&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# source the shell rc file (this happens automatically for your next terminal session)&lt;/span&gt;
❯&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;~/.bashrc

&lt;span class="c1"&gt;# then exec the alias to drop privileges for which ever identity is currently active as well as any&lt;/span&gt;
&lt;span class="c1"&gt;# Simple Token Service sessions you might have obtained via `assume-role`&lt;/span&gt;
❯&lt;span class="w"&gt; &lt;/span&gt;noaws
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/br&gt;&lt;/p&gt;
&lt;h3 id="assume-role"&gt;Assume Role&lt;/h3&gt;
&lt;p&gt;This describes another approach to gaining privileges in AWS and requires that an AWS IAM "role" has already been defined to control access to your resources. This is a global entity in your account that couples an IAM policy to any number of IAM users thereby allowing some action on some resource.&lt;/p&gt;
&lt;p&gt;This is similar but different from using IAM groups to assign the same privileges to multiple users in that it enables granting privileges that span AWS accounts and provides only time-limited, non-interactive session tokens. This is also contrasting to the cumbersome practice of having many IAM user credentials for many AWS accounts.&lt;/p&gt;
&lt;p&gt;It is ideal to grant minimum privileges to a particular role in your own AWS account, and then grant to humans and robots the ability to assume that role with their own IAM user identity. That way they need only one identity regardless of to which AWS account their IAM user belongs, and you can modify the grants for the role in your own AWS account at any time. This also means you never need to know another user's secret access key, and you can still enforce criteria such as multi-factor authentication.&lt;/p&gt;
&lt;p&gt;I've cobbled together &lt;a href="https://github.com/qrkourier/ansible-credstash/blob/master/aws-assume-role.sh"&gt;some additional shellcode functions&lt;/a&gt; (originally to allow Ansible playbooks to assume an IAM role) that implement the following workflow:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;source an IAM user identity from an encrypted credentials file&lt;/li&gt;
&lt;li&gt;assume a particular IAM role for the maximum allowed session time (one hour)&lt;ul&gt;
&lt;li&gt;skip assuming role if a session token is already available in a temporary file, and&lt;/li&gt;
&lt;li&gt;prompt for second trust factor (MFA OTP)&lt;/li&gt;
&lt;li&gt;warn if the session token expiry is imminent&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;drop privileges&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="related"&gt;Related&lt;/h2&gt;
&lt;p&gt;There are ready-made utilities that also help with properly handling AWS credentials, but that obfuscate the handling of secrets, may place limitations on the way those secrets are used, and are not portable between ubiquitous shell environments. The above solution conserves the trust of yet another piece of software and introduces no limitations to the &lt;code&gt;aws&lt;/code&gt; CLI or the default AWS credential discovery chain employed by most other tools. If you're just looking for a convenient remediation for MacOS, then these others below may be a better fit for you.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;99Designs has &lt;a href="https://99designs.com/tech-blog/blog/2015/10/26/aws-vault/"&gt;a utility called aws-vault&lt;/a&gt; for MacOS&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/pda/aws-keychain"&gt;aws-keychain&lt;/a&gt; for MacOS&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;AWS publishes &lt;a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html"&gt;best practices for identity access management&lt;/a&gt;.&lt;/p&gt;
&lt;hr&gt;</content><category term="Tech"/><category term="aws"/><category term="sysadmin"/><category term="identity"/><category term="encryption"/></entry><entry><title>Fly.io Programmable Front-end</title><link href="https://www.qrk.us/flyio-programmable-front-end.html" rel="alternate"/><published>2018-05-10T00:00:00+00:00</published><updated>2025-11-20T05:19:39.439773+00:00</updated><author><name>Kenneth</name></author><id>tag:www.qrk.us,2018-05-10:/flyio-programmable-front-end.html</id><summary type="html">&lt;p&gt;In short, a programmable cloud delivery network (CDN) aka front-end like Fly.io is an API by which to configure the logical edge of an application stack. Fly.io also provides an intuitive web UI which simplifies common administrative operations.&lt;/p&gt;
&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Table of contents:&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#example-of-a-multi-cloud-backend-fronted-by-flyio"&gt;Example of a multi-cloud backend fronted by …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;In short, a programmable cloud delivery network (CDN) aka front-end like Fly.io is an API by which to configure the logical edge of an application stack. Fly.io also provides an intuitive web UI which simplifies common administrative operations.&lt;/p&gt;
&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Table of contents:&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#example-of-a-multi-cloud-backend-fronted-by-flyio"&gt;Example of a multi-cloud backend fronted by Fly.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#example-of-a-personal-web-site-without-hosting-expenses"&gt;Example of a personal web site without hosting expenses&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;high availability for a service endpoint (this is automatic);&lt;/li&gt;
&lt;li&gt;requesting, issuing, binding, and renewing a free TLS server certificate (just verify a domain name);&lt;/li&gt;
&lt;li&gt;injecting business logic and automation at the application edge e.g. analytics, policies, authentication, caching, redirects, lambda functions, etc... (just click to enable middleware); and&lt;/li&gt;
&lt;li&gt;allocating workloads to multiple upstreams (backend capacity pools e.g. GCE, ECS, EC2).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="example-of-a-multi-cloud-backend-fronted-by-flyio"&gt;Example of a multi-cloud backend fronted by Fly.io&lt;/h3&gt;
&lt;p&gt;For one project I created a Fly.io "site" to front an application served up by Kubernetes in Google Compute Engine (GCE) and Elastic Container Service (ECS) simultaneously. Such a multi-cloud architecture is typically possible with any CDN, but here's an overview of the steps to do this with Fly.io.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;docker push&lt;/code&gt; to upload my custom Docker image to the Elastic Container Registry (ECR)&lt;/li&gt;
&lt;li&gt;configure the Kubernetes cluster to source that container image by registry address, name:tag, and publish the service port on a load balancer&lt;/li&gt;
&lt;li&gt;configure AWS's ECS Fargate to source the image by name:tag (requires hosting the container image in ECR), and publish the service port on an Elastic Load Balancer (ELB)&lt;/li&gt;
&lt;li&gt;create the Fly.io site with a backend of the Kubernetes load balancer address:port and ELB address:port&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;A note about TLS (SSL): It's a great idea to require TLS everywhere. This gives greater assurance of data integrity even when confidentiality is a non-issue. Both GCE Kubernetes LBs and ELBs can issue and bind a free TLS server certificate. There's no need to request a certificate common name (CN) or subject alternative name (SAN) matching the domain name your clients/customers will "see". This is because the frontend provided by Fly.io will bind that familiar domain name when you verify the DNS hostname. The CN+SAN in the backend load balancers' server certificates are arbitrary and simply need to match the domain name generated by that platform for the particular service address e.g. example-service-2045107736.us-east-1.elb.amazonaws.com.&lt;/p&gt;
&lt;h2 id="example-of-a-personal-web-site-without-hosting-expenses"&gt;Example of a personal web site without hosting expenses&lt;/h2&gt;
&lt;p&gt;I came across Fly.io by way of an email invitation for a free trial and have combined this with &lt;a href="https://www.qrk.us/keybase.html"&gt;the Keybase Filesystem&lt;/a&gt; and the Pelican static HTML generator (described in &lt;a href="https://www.qrk.us/pages/about.html"&gt;About page&lt;/a&gt;) to create this blog site which is highly secure, performant, highly available, and (for now) completely free of operational expenses!&lt;/p&gt;
&lt;hr&gt;</content><category term="Tech"/><category term="cdn"/><category term="devops"/></entry><entry><title>CloudFlare DNS for Network Manager</title><link href="https://www.qrk.us/cloudflare-dns-for-network-manager.html" rel="alternate"/><published>2018-04-11T00:00:00+00:00</published><updated>2025-11-20T05:19:39.438773+00:00</updated><author><name>Kenneth</name></author><id>tag:www.qrk.us,2018-04-11:/cloudflare-dns-for-network-manager.html</id><summary type="html">&lt;p&gt;CloudFlare provides &lt;a href="https://developers.cloudflare.com/1.1.1.1/what-is-1.1.1.1/"&gt;a performant recursive nameserver&lt;/a&gt; along with a promise to never surveil their users.&lt;/p&gt;
&lt;p&gt;Their Linux quickstart involves modifying the standard C library's resolver (i.e. /etc/resolv.conf) which is a terrible idea if you are using most of the popular flavors of Linux as a daily driver …&lt;/p&gt;</summary><content type="html">&lt;p&gt;CloudFlare provides &lt;a href="https://developers.cloudflare.com/1.1.1.1/what-is-1.1.1.1/"&gt;a performant recursive nameserver&lt;/a&gt; along with a promise to never surveil their users.&lt;/p&gt;
&lt;p&gt;Their Linux quickstart involves modifying the standard C library's resolver (i.e. /etc/resolv.conf) which is a terrible idea if you are using most of the popular flavors of Linux as a daily driver desktop OS because they're likely using &lt;code&gt;dnsmasq&lt;/code&gt; or &lt;code&gt;resolvconf&lt;/code&gt; or both to declare the contents of that file.&lt;/p&gt;
&lt;p&gt;For what it's worth, here's shellcode to quickly reconfigure an existing Network Manager saved connection with &lt;code&gt;nmcli&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# make a note of the name of the connection you wish to configure e.g. &amp;quot;WiFi Secure&amp;quot;&lt;/span&gt;
nmcli&lt;span class="w"&gt; &lt;/span&gt;connection&lt;span class="w"&gt; &lt;/span&gt;show

&lt;span class="c1"&gt;# save the name of the connection in a variable&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;CONN&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;WiFi Secure&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# paste the following in your terminal to reconfigure DNS&lt;/span&gt;
nmcli&lt;span class="w"&gt; &lt;/span&gt;connection&lt;span class="w"&gt; &lt;/span&gt;modify&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$CONN&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;ipv4.ignore-auto-dns&lt;span class="w"&gt; &lt;/span&gt;yes&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;ipv4.never-default&lt;span class="w"&gt; &lt;/span&gt;no&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;ipv4.dns&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;1.1.1.1&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# reactivate the saved connection&lt;/span&gt;
nmcli&lt;span class="w"&gt; &lt;/span&gt;connection&lt;span class="w"&gt; &lt;/span&gt;up&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$CONN&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# optionally restore default DNS (DHCP)&lt;/span&gt;
nmcli&lt;span class="w"&gt; &lt;/span&gt;connection&lt;span class="w"&gt; &lt;/span&gt;modify&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$CONN&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;ipv4.ignore-auto-dns&lt;span class="w"&gt; &lt;/span&gt;no
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Tech"/><category term="Linux"/><category term="dns"/><category term="sysadmin"/><category term="network manager"/></entry><entry><title>Keybase</title><link href="https://www.qrk.us/keybase.html" rel="alternate"/><published>2018-03-21T00:00:00+00:00</published><updated>2025-11-20T05:19:39.439773+00:00</updated><author><name>Kenneth</name></author><id>tag:www.qrk.us,2018-03-21:/keybase.html</id><summary type="html">&lt;p&gt;I first started using &lt;a href="https://www.keybase.io"&gt;@KeybaseIO&lt;/a&gt; a few years ago to link together my social accounts. This creates a web of accounts which is dramatically more difficult to impersonate than any single account. So, it's an exercise in impeding identity theft.&lt;/p&gt;
&lt;p&gt;A web of accounts could, for example, enable me to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I first started using &lt;a href="https://www.keybase.io"&gt;@KeybaseIO&lt;/a&gt; a few years ago to link together my social accounts. This creates a web of accounts which is dramatically more difficult to impersonate than any single account. So, it's an exercise in impeding identity theft.&lt;/p&gt;
&lt;p&gt;A web of accounts could, for example, enable me to trust your email signature when I only know you through Twitter.&lt;/p&gt;
&lt;p&gt;The Keybase filesystem is one of the newer tools and has a lot of promise. It is a global
namespace with public and private trees. The private tree allows any two parties have a
truly confidential exchange of data just by reading and writing in the special folders on
their computer. You can look over here for &lt;a href="https://keybase.io/docs/kbfs"&gt;more info about
it&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This web page is actually hosted in the kbfs at &lt;code&gt;/keybase/public/kourier&lt;/code&gt;. The content is
signed during upload and so is verifiable by running the Keybase app on your computer,
though it is not obvious in your web browser.&lt;/p&gt;
&lt;p&gt;If you install Keybase you'll be able to passively track changes in the web of identity
with commands like&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;keybase&lt;span class="w"&gt; &lt;/span&gt;follow&lt;span class="w"&gt; &lt;/span&gt;kourier
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;hr&gt;</content><category term="Tech"/><category term="identity"/><category term="encryption"/></entry><entry><title>A Life in the Twentieth Century: The Memoir of Iris Jean Yandle Beatty</title><link href="https://www.qrk.us/a-life-in-the-twentieth-century-the-memoir-of-iris-jean-yandle-beatty.html" rel="alternate"/><published>2012-12-01T00:00:00+00:00</published><updated>2025-11-20T05:19:39.438773+00:00</updated><author><name>Iris Jean Yandle Beatty</name></author><id>tag:www.qrk.us,2012-12-01:/a-life-in-the-twentieth-century-the-memoir-of-iris-jean-yandle-beatty.html</id><summary type="html">&lt;h2 id="introduction"&gt;Introduction&lt;/h2&gt;
&lt;p&gt;I am truly an elderly lady, and at the age of seventy-five, I decided to do something a lot of old folks do—think about, and then write about, events my family and I have lived through. I want to record the experiences that were delightful, those that were …&lt;/p&gt;</summary><content type="html">&lt;h2 id="introduction"&gt;Introduction&lt;/h2&gt;
&lt;p&gt;I am truly an elderly lady, and at the age of seventy-five, I decided to do something a lot of old folks do—think about, and then write about, events my family and I have lived through. I want to record the experiences that were delightful, those that were harder to manage, and the blessed changes in the way we live. &lt;/p&gt;
&lt;p&gt;Most folks would mark me as a silly old woman, as I am a very ordinary and average person. I have never been mentioned in print except for a small paragraph in &lt;em&gt;The Charlotte Observer&lt;/em&gt; when I performed a dance in a kindergarten presentation at the age of five, and again in 1954, when I sent a picture of myself in my wedding gown to the paper. That has been the extent of the publicity about my life. But I hope my children, grandchildren, and great-grandchildren might one day want to know more about the past and our family than history books can tell them.&lt;/p&gt;
&lt;h2 id="roots-and-ancestry"&gt;Roots and Ancestry&lt;/h2&gt;
&lt;p&gt;My forebears were, most certainly, brave. A large number of my ancestors came to the United States from England in the mid-1800s, crossing the Atlantic in small sailing ships. There were two prominent families: the Yandles and the Johnstons. They intermarried frequently—Johnstons marrying Yandles and Yandles marrying Johnstons—and settled in the Carolinas, mostly around Pineville and Fort Mill, or across the Catawba River near Mount Holly.&lt;/p&gt;
&lt;p&gt;My Great-Grandfather Yandle was a storekeeper near Pineville. During the Civil War, when the wives and children of Confederate soldiers had no money for food, he could not bear to turn them away. He would say, "Well, I SAID they needed to eat!" and give them food from his store. Eventually, his generosity caused his bankruptcy, and his younger brother, Edward Yandle, helped him settle his debts. I never knew him, but I heard stories of his wife, my Great-Grandmother Sally Elizabeth. She lived to celebrate her fiftieth wedding anniversary, wearing a hand-sewn black silk dress that I later inherited.&lt;/p&gt;
&lt;h2 id="my-parents"&gt;My Parents&lt;/h2&gt;
&lt;p&gt;My father, Leroy Samuel Yandle, was born in 1896 in Mount Holly. He was the youngest boy in a family of five children. He was a strong man, over six feet tall, who served in the Merchant Marines around the time of World War I, traveling to places like China. Later, he became a painting contractor.&lt;/p&gt;
&lt;p&gt;My mother, Minnie Cole Parks, was born in 1902 near Pineville. She was the youngest child in her family. She was a skilled seamstress and a strong woman who held our family together through many trials.&lt;/p&gt;
&lt;h2 id="the-unexpected-arrival-1931"&gt;The Unexpected Arrival (1931)&lt;/h2&gt;
&lt;p&gt;I was born on February 12, 1931, in Charlotte, North Carolina. I was not the first child. My sister, Ella Cornelia, was born in November 1925. For six years, she was the only child in our family and the only grandchild in the Yandle family. She was the center of attention.&lt;/p&gt;
&lt;p&gt;In those days, parents often did not tell children that a new baby was coming. So, when I was born, my sister had no warning. She was sent to stay with a neighbor, Pauline Funderburk, for a few days. When she returned home, she found our mother holding a baby—me. Visitors were cooing over the new arrival, ignoring the girl who had always been the star.&lt;/p&gt;
&lt;p&gt;Ella Cornelia was shocked and angry. Her response was immediate: "Take her back!" It took many years for her to forgive me for being born, and for a long time, I was an unwelcome nuisance to her.&lt;/p&gt;
&lt;h2 id="early-childhood-on-east-fifth-street"&gt;Early Childhood on East Fifth Street&lt;/h2&gt;
&lt;p&gt;My earliest memories are of the house on East Fifth Street in Charlotte, where we lived until I was about three. It was a duplex across the street from the house owned by my Great-Uncle Edward and Great-Aunt Lizzie. &lt;/p&gt;
&lt;p&gt;I have two vivid memories from that time. One is of terror: I wandered into a small back vestibule that had no light, and the door closed behind me, trapping me in pitch darkness until my sister rescued me. The other is of beauty: sitting on the front porch floor, playing with bright crescents of sunlight cast through the arched drainage holes in the solid porch banister.&lt;/p&gt;
&lt;p&gt;Great-Uncle Edward and Great-Aunt Lizzie were unique characters. They were brother and sister, neither ever married. They had been born in England and spoke with a different vocabulary than our Southern drawl. Aunt Lizzie was terrified of germs; she would never touch a doorknob with her bare hand, always using her apron as a shield. Their house had both electric and gas lights—a marvel to me.&lt;/p&gt;
&lt;h2 id="the-depression-and-hard-times"&gt;The Depression and Hard Times&lt;/h2&gt;
&lt;p&gt;I was born into the Great Depression. Though I was too young to understand it at the time, it shaped our lives. My father had invested in rental houses, but when his tenants lost their jobs and couldn't pay rent, he couldn't make the mortgage payments. He lost the houses and his job at the lumber yard because no one was building. He reinvented himself as a painting contractor to survive.&lt;/p&gt;
&lt;p&gt;We were not rich, but we were never hungry. However, I remember the "bums"—men out of work and homeless—who would knock on our back door asking for food. My mother never turned them away; she would make a cheese sandwich and give them a glass of milk or coffee, which they would eat sitting on the back steps.&lt;/p&gt;
&lt;h2 id="sisters-illness"&gt;Sister's Illness&lt;/h2&gt;
&lt;p&gt;When I was about three years old (c. 1934), my sister Ella Cornelia became gravely ill. She had played a vigorous game of jump rope, jumping ten games in a row to "save" her team. That night she developed a fever. It turned into pleurisy and heart trouble.&lt;/p&gt;
&lt;p&gt;In those days, before antibiotics like penicillin, there was little doctors could do. Four doctors said she would die. Only Dr. John R. Ashe insisted she would live. She spent a year in bed or a wheelchair, frail and weak. During the worst of her illness, I was sent to live with my Aunt Ola and Uncle Vance on their farm near Pineville. &lt;/p&gt;
&lt;p&gt;I remember staying with Aunt Ola. She had no children and didn't run her house like my mother. One traumatic day she washed my hair, and I cried, accusing her: "You went and wet my hair!" It became a family joke, but at the time, I just wanted my mother.&lt;/p&gt;
&lt;h2 id="life-on-west-eleventh-street"&gt;Life on West Eleventh Street&lt;/h2&gt;
&lt;p&gt;When I was about three, we moved to 407 West Eleventh Street, a duplex where we lived until I married. It was a different world then. Ice was delivered by a horse-drawn wagon for our icebox. We didn't have a telephone until I was older. &lt;/p&gt;
&lt;p&gt;I attended Bethune School, walking the few blocks alone from the first grade. After school, I would walk uptown to "The Square" (Trade and Tryon Streets) where my mother worked in a sewing shop. I would spend my afternoons there, playing with spools of thread or watching the traffic.&lt;/p&gt;
&lt;p&gt;One of my playmates on Eleventh Street was Pete Kanasas, the son of the Greek man who ran the corner café. Pete was mischievous. One day, he tricked me into sitting on a table balanced on a paint bucket. He jumped off, and I fell onto a broken "Three-Center" bottle (a cheap soda bottle), cutting my wrist badly. I still have the scar.&lt;/p&gt;
&lt;h2 id="grandparents-and-country-life"&gt;Grandparents and Country Life&lt;/h2&gt;
&lt;p&gt;We visited our grandparents in Pineville almost every Sunday.&lt;/p&gt;
&lt;p&gt;My &lt;strong&gt;Yandle Grandparents&lt;/strong&gt; lived in a farmhouse without electricity or running water. My Grandmother Ella was blind and bedridden with iritis. She sat in a rocking chair in her room, and the adults would gather there to talk. My Grandfather Amos was a quiet man who sat on the porch in the summer killing flies with a swatter. My Uncle Eddie and Aunts Helen and Martha lived with them. Aunt Helen had lost all her teeth at eighteen due to a doctor's bad medicine.&lt;/p&gt;
&lt;p&gt;My &lt;strong&gt;Parks Grandparents&lt;/strong&gt; (Maternal) lived nearby. I remember a special Sunday when I was about five. My Grandfather Parks was getting too old to farm, and they were moving in with Aunt Ola. It was his last Sunday driving his own buggy to Flint Hill Baptist Church. He took me with him. I wore a pink dress and felt very special riding behind his old white horse, Pink.&lt;/p&gt;
&lt;p&gt;Later, tragedy struck the Parks family. My Grandfather Parks was deaf. One day, during World War II, he walked down to the railroad tracks to cut Jimson weed for a calf. A military train, running unscheduled and silent to protect war secrets, struck and killed him.&lt;/p&gt;
&lt;h2 id="the-war-years"&gt;The War Years&lt;/h2&gt;
&lt;p&gt;World War II changed everything. I was ten when Pearl Harbor was bombed. Suddenly, there were shortages of sugar, shoes, and gasoline. My father worked away from home for weeks at a time, painting oil tanks in Savannah and other coastal cities. My sister worked as a nurse's aide and later in a doctor's office.&lt;/p&gt;
&lt;p&gt;I remember the polio epidemic one summer. Schools closed early, and children were confined to their yards. I couldn't go to the library or the movies. It was a lonely time.&lt;/p&gt;
&lt;h2 id="growing-up"&gt;Growing Up&lt;/h2&gt;
&lt;p&gt;I went to Harding High School, where I played violin in the orchestra. I made a dear friend, Carolyn Purcell. We helped her mother teach Vacation Bible School at First Baptist Church for years.&lt;/p&gt;
&lt;p&gt;My sister eventually married Harry May, a soldier she met through friends. I went to Queens College as a day student, riding the bus across town.&lt;/p&gt;
&lt;h2 id="meeting-paw-paw"&gt;Meeting Paw-Paw&lt;/h2&gt;
&lt;p&gt;After college, I took a job as church secretary at Calvary Methodist Church. On my very first Sunday there, I met a young man named Robert "Bobby" Beatty. He was the great-grandson of the church's founders. We began dating in December, got engaged on Christmas Eve, and were married in June 1954.&lt;/p&gt;
&lt;p&gt;Bobby had grown up in Charlotte, too. His grandfather had been a policeman who died at his desk, and Bobby had lived with his grandmother on South Boulevard, helping her run a boarding house for Lance Packing Company workers. He had served in the Army Air Force in the Pacific during the war.&lt;/p&gt;
&lt;h2 id="reflections"&gt;Reflections&lt;/h2&gt;
&lt;p&gt;I am now seventy-five years old. My husband is eighty. We have lived through horse-and-buggy days to see men walk on the moon. We have seen the discovery of penicillin, the end of polio, and the invention of television and computers. Life has been full of changes, some sad, some wonderful. I have tried to put down these memories so that my children, Louise and Fred, and my grandchildren will know where they came from.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Iris Jean Yandle Beatty&lt;/em&gt;&lt;/p&gt;</content><category term="Family"/><category term="memoir"/><category term="family"/><category term="history"/><category term="Charlotte"/></entry><entry><title>The Story of Minnie Brantley</title><link href="https://www.qrk.us/the-story-of-minnie-brantley.html" rel="alternate"/><published>2012-12-01T00:00:00+00:00</published><updated>2025-11-20T05:19:39.438773+00:00</updated><author><name>Iris Jean Yandle Beatty</name></author><id>tag:www.qrk.us,2012-12-01:/the-story-of-minnie-brantley.html</id><summary type="html">&lt;p&gt;&lt;em&gt;Note on the Relationship to the Author:&lt;/em&gt;
This narrative appears to be a piece of fiction or a creative writing exercise authored by Iris Jean Yandle Beatty. While the protagonist shares the first name of Iris's mother (Minnie), the life events described—being orphaned at age four, having multiple husbands …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;em&gt;Note on the Relationship to the Author:&lt;/em&gt;
This narrative appears to be a piece of fiction or a creative writing exercise authored by Iris Jean Yandle Beatty. While the protagonist shares the first name of Iris's mother (Minnie), the life events described—being orphaned at age four, having multiple husbands, and having no surviving children—contradict the actual biography of Iris's mother, Minnie Parks Yandle, as detailed in Iris's memoirs. Minnie Brantley is a character created by the author, perhaps exploring themes of resilience, loss, and new beginnings that mirrored her own family's values.&lt;/p&gt;
&lt;h2 id="part-i-the-ending"&gt;Part I: The Ending&lt;/h2&gt;
&lt;p&gt;The story opens at twilight on the day of Elmer Brantley's funeral. Elmer was Minnie's husband of nearly fifteen years, the fourth generation of his family to farm the land in Parker's Valley. He had died after a grueling three-year illness during which Minnie served as his nurse and the sole manager of the farm.&lt;/p&gt;
&lt;p&gt;Minnie sits on the porch swing, exhausted. She faces a painful reality: she must leave the home she has loved and worked for. Elmer’s adult children—three daughters who married military men and moved away, and one son, Clyde—do not want to keep the farm. They want to sell the land and divide the proceeds.&lt;/p&gt;
&lt;h3 id="the-trouble-with-clyde"&gt;The Trouble with Clyde&lt;/h3&gt;
&lt;p&gt;The most immediate threat is Elmer's son, Clyde. Unlike his father, Clyde is irresponsible and an alcoholic. He has lost his own property and failed to support his wife and five (soon to be six) children.&lt;/p&gt;
&lt;p&gt;On the night of the funeral, after the guests have left, Clyde drives his truck drunkenly onto the property, crashes into an oak tree, and attempts to break into the house, screaming for Minnie. Minnie, supported by her loyal neighbors and best friends, &lt;strong&gt;Ardie and Gary&lt;/strong&gt;, calls the sheriff. Clyde is arrested, and Minnie makes the difficult decision to press charges, hoping that jail time and forced rehabilitation might save his life, even if she cannot save his inheritance.&lt;/p&gt;
&lt;h2 id="part-ii-a-history-of-loss"&gt;Part II: A History of Loss&lt;/h2&gt;
&lt;p&gt;Minnie's resilience is born of a lifetime of tragedy. She reflects on her history of "new beginnings," almost all of which were forced upon her by loss.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;The Orphan:&lt;/strong&gt; Born to wealthy parents, Minnie was orphaned at age four when they died in a car accident while she was staying with a temporary babysitter.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;The Lost Year:&lt;/strong&gt; Due to a miscommunication, authorities did not know where she was. She spent a year living in poverty with the babysitter's relative, an eccentric elderly woman named &lt;strong&gt;Aunt Hattie&lt;/strong&gt;, in a primitive farmhouse without electricity or running water. Minnie learned to work hard—milking cows and chopping wood—before she was finally located by her parents' estate lawyers.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Adulthood:&lt;/strong&gt; Minnie survived three husbands and the tragic loss of her own children. She learned that "new beginnings" were a skill she had to master to survive.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="part-iii-the-departure"&gt;Part III: The Departure&lt;/h2&gt;
&lt;p&gt;Determined not to watch Elmer’s farm fall into ruin or be sold to strangers while she is present, Minnie executes a meticulous plan to close down her life there.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;The Farm:&lt;/strong&gt; She spends months harvesting the final crops, selling off the beef cattle and pigs, and finding homes for the barn cats. She cleans the barns and chicken coops until they are spotless.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;The House:&lt;/strong&gt; She packs only her personal belongings and the furniture she bought herself, leaving the rest for Elmer's daughters to claim or sell.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;The Decision:&lt;/strong&gt; Minnie decides to return to a piece of land she inherited from her parents—500 acres she hasn't seen since she was a child. It has been leased to a paper company for timber, but the lease has expired. She hopes the old house is still standing.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="part-iv-the-caravan"&gt;Part IV: The Caravan&lt;/h2&gt;
&lt;p&gt;In a bold move, Minnie convinces her best friends, Ardie and Gary, to join her. They, too, are ready for a change.&lt;/p&gt;
&lt;p&gt;On a Tuesday morning in November, a caravan departs the Brantley farm:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Minnie driving a new van pulling a trailer filled with chickens, goats, and pets.&lt;/li&gt;
&lt;li&gt;Ardie and Gary driving a moving van.&lt;/li&gt;
&lt;li&gt;Their sons driving pickup trucks loaded with equipment.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;They leave behind the sorrow of the past years, heading toward a property Minnie barely remembers, ready to build a new life together from the ground up. It is the sixth—or perhaps seventh—new beginning of Minnie Brantley's life.&lt;/p&gt;</content><category term="Family"/><category term="fiction"/><category term="family"/><category term="resilience"/></entry></feed>