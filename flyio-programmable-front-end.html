<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Fly.io Programmable Front-end</title><link rel="stylesheet" href="././css/main.css"><link href="https://www.qrk.us/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="hella labs Atom Feed"></head><body id="index" class="home"><header id="banner" class="body"><h1><a href="./">hella labs </a></h1><nav><ul><li><a href="./pages/about.html">About</a></li><li><a href="./pages/projects.html">Projects</a></li><li class="active"><a href="./category/tech.html">Tech</a></li></ul></nav></header><section id="content" class="body"><article><header><h1 class="entry-title"><a href="./flyio-programmable-front-end.html" rel="bookmark" title="Permalink to Fly.io Programmable Front-end">Fly.io Programmable Front-end</a></h1></header><div class="entry-content"><footer class="post-info"><abbr class="published" title="2023-09-24T16:45:27.712329-04:00"> Published: Sun 24 September 2023 </abbr><br><abbr class="modified" title="2023-09-24T16:45:27.712329-04:00"> Updated: Sun 24 September 2023 </abbr><address class="vcard author"> By <a class="url fn" href="./author/ken.html">Ken</a></address><p>tags: <a href="./tag/cdn.html">cdn</a> <a href="./tag/devops.html">devops</a> </p></footer> <p>In short, a programmable cloud delivery network (CDN) aka front-end like Fly.io is an API by which to configure the logical edge of an application stack. Fly.io also provides an intuitive web UI which simplifies common administrative operations.</p><div class="toc"><span class="toctitle">Table of contents:</span><ul><li><a href="#example-of-a-multi-cloud-backend-fronted-by-flyio">Example of a multi-cloud backend fronted by Fly.io</a></li><li><a href="#example-of-a-personal-web-site-without-hosting-expenses">Example of a personal web site without hosting expenses</a></li></ul></div><p>For example:</p><ul><li>high availability for a service endpoint (this is automatic);</li><li>requesting, issuing, binding, and renewing a free TLS server certificate (just verify a domain name);</li><li>injecting business logic and automation at the application edge e.g. analytics, policies, authentication, caching, redirects, lambda functions, etc... (just click to enable middleware); and</li><li>allocating workloads to multiple upstreams (backend capacity pools e.g. GCE, ECS, EC2).</li></ul><h3 id="example-of-a-multi-cloud-backend-fronted-by-flyio">Example of a multi-cloud backend fronted by Fly.io</h3><p>For one project I created a Fly.io "site" to front an application served up by Kubernetes in Google Compute Engine (GCE) and Elastic Container Service (ECS) simultaneously. Such a multi-cloud architecture is typically possible with any CDN, but here's an overview of the steps to do this with Fly.io.</p><ol><li><code>docker push</code> to upload my custom Docker image to the Elastic Container Registry (ECR)</li><li>configure the Kubernetes cluster to source that container image by registry address, name:tag, and publish the service port on a load balancer</li><li>configure AWS's ECS Fargate to source the image by name:tag (requires hosting the container image in ECR), and publish the service port on an Elastic Load Balancer (ELB)</li><li>create the Fly.io site with a backend of the Kubernetes load balancer address:port and ELB address:port</li></ol><p>A note about TLS (SSL): It's a great idea to require TLS everywhere. This gives greater assurance of data integrity even when confidentiality is a non-issue. Both GCE Kubernetes LBs and ELBs can issue and bind a free TLS server certificate. There's no need to request a certificate common name (CN) or subject alternative name (SAN) matching the domain name your clients/customers will "see". This is because the frontend provided by Fly.io will bind that familiar domain name when you verify the DNS hostname. The CN+SAN in the backend load balancers' server certificates are arbitrary and simply need to match the domain name generated by that platform for the particular service address e.g. example-service-2045107736.us-east-1.elb.amazonaws.com.</p><h2 id="example-of-a-personal-web-site-without-hosting-expenses">Example of a personal web site without hosting expenses</h2><p>I came across Fly.io by way of an email invitation for a free trial and have combined this with <a href="./keybase.html">the Keybase Filesystem</a> and the Pelican static HTML generator (described in <a href="./pages/about.html">About page</a>) to create this blog site which is highly secure, performant, highly available, and (for now) completely free of operational expenses!</p><hr></div></article></section><section id="extras" class="body"><div class="social"><h2>social</h2><ul><li><a href="https://www.qrk.us/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li></ul></div></section></body></html>