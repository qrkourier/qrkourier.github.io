<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><meta charset="utf-8" content="text/html" http-equiv="Content-Type"/><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/><link href="https://mastodon.online/@qrkourier" rel="me"/><title>Fly.io Programmable Front-end</title><meta content="True" name="HandheldFriendly"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="origin" name="referrer"/><meta content="Pelican" name="generator"/><link href="./flyio-programmable-front-end.html" rel="canonical"/><link href="https://www.qrk.us/feeds/all.atom.xml" rel="alternate" title="hella labs Full Atom Feed" type="application/atom+xml"/><link href="https://www.qrk.us/feeds/tech.atom.xml" rel="alternate" title="hella labs Categories Atom Feed" type="application/atom+xml"/><link href="././css/style.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]--><script>var siteUrl='.';</script><script>var localTheme=localStorage.getItem('attila_theme');switch(localTheme){case'dark':document.documentElement.classList.add('theme-dark');break;case'light':document.documentElement.classList.add('theme-light');break;default:break;}</script><meta content="In short, a programmable cloud delivery network (CDN) aka front-end like Fly.io is an API by which to configure the logical edge of an..." name="description"/><meta content="Kenneth" name="author"/><meta content="cdn" name="tags"/><meta content="devops" name="tags"/><meta content="hella labs" prefix="og: http://ogp.me/ns#" property="og:site_name"/><meta content="Fly.io Programmable Front-end" prefix="og: http://ogp.me/ns#" property="og:title"/><meta content="In short, a programmable cloud delivery network (CDN) aka front-end like Fly.io is an API by which to configure the logical edge of an..." prefix="og: http://ogp.me/ns#" property="og:description"/><meta content="en_US" prefix="og: http://ogp.me/ns#" property="og:locale"/><meta content="./flyio-programmable-front-end.html" prefix="og: http://ogp.me/ns#" property="og:url"/><meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"/><meta content="2018-05-10 00:00:00+00:00" prefix="og: http://ogp.me/ns#" property="article:published_time"/><meta content="2024-11-11 00:27:52.092151+00:00" prefix="og: http://ogp.me/ns#" property="article:modified_time"/><meta content="./author/kenneth.html" prefix="og: http://ogp.me/ns#" property="article:author"/><meta content="Tech" prefix="og: http://ogp.me/ns#" property="article:section"/><meta content="cdn" prefix="og: http://ogp.me/ns#" property="article:tag"/><meta content="devops" prefix="og: http://ogp.me/ns#" property="article:tag"/><meta content="https://github.com/qrkourier/qrkourier.github.io/assets/1434400/e6b42272-75b0-4b3c-8ab8-2a23be94d45f" prefix="og: http://ogp.me/ns#" property="og:image"/><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","name":"Fly.io Programmable Front-end","headline":"Fly.io Programmable Front-end","datePublished":"2018-05-10 00:00:00+00:00","dateModified":"2024-11-11 00:27:52.092151+00:00","author":{"@type":"Person","name":"Kenneth","url":"./author/kenneth.html"},"image":"././images/post-bg.jpg","url":"./flyio-programmable-front-end.html","description":"In short, a programmable cloud delivery network (CDN) aka front-end like Fly.io is an API by which to configure the logical edge of an..."}</script></head><body class="category-template"><div class="nav-header"><nav aria-label="Main" class="nav-wrapper"><ul><li role="presentation"><a href="./"><span>Contact</span></a></li><li role="presentation"><a href="./pages/projects.html"><span>Projects</span></a></li><li role="presentation"><a href="./pages/about.html"><span>About</span></a></li><li role="presentation"><a href="./category/gardening.html"><span>Gardening</span></a></li><li class="nav-tech active" role="presentation"><a href="./category/tech.html"><span>Tech</span></a></li></ul><ul class="nav-meta"><li class="nav-search" style="display: none;"><a title="Search"><i aria-hidden="true" class="icon icon-search"></i><span>Search</span></a></li></ul> </nav><div class="nav-wrapper-control"><div class="inner"><a class="nav-menu" role="button"><i aria-hidden="true" class="icon icon-menu"></i>Menu</a><a class="nav-search" role="button" style="display: none;" title="Search"><i aria-hidden="true" class="icon icon-search"></i></a></div></div></div><div aria-label="Close" class="nav-close" role="button"></div><section class="page-wrapper" id="wrapper"><div class="progress-container"><span class="progress-bar"></span></div><header class="post-header"><div class="inner"><span class="post-info"><span class="post-type">Article</span><span class="post-count">Tech</span></span><h1 class="post-title">Fly.io Programmable Front-end</h1><div class="post-meta"><div class="post-meta-avatars"><figure class="post-meta-avatar avatar"><a class="author-avatar" href="./author/kenneth.html"><img alt="Kenneth Bingham" class="author-profile-image" src="https://github.com/qrkourier/qrkourier.github.io/assets/1434400/a8155877-b78a-4ba0-895f-9396777f8b82"/></a></figure></div><h4 class="post-meta-author"> Kenneth Bingham </h4><time datetime="Thu 10 May 2018">Thu 10 May 2018</time></div></div></header><main class="content" role="main"><article class="post"><div class="inner"><section class="post-content"><p>In short, a programmable cloud delivery network (CDN) aka front-end like Fly.io is an API by which to configure the logical edge of an application stack. Fly.io also provides an intuitive web UI which simplifies common administrative operations.</p><div class="toc"><span class="toctitle">Table of contents:</span><ul><li><a href="#example-of-a-multi-cloud-backend-fronted-by-flyio">Example of a multi-cloud backend fronted by Fly.io</a></li><li><a href="#example-of-a-personal-web-site-without-hosting-expenses">Example of a personal web site without hosting expenses</a></li></ul></div><p>For example:</p><ul><li>high availability for a service endpoint (this is automatic);</li><li>requesting, issuing, binding, and renewing a free TLS server certificate (just verify a domain name);</li><li>injecting business logic and automation at the application edge e.g. analytics, policies, authentication, caching, redirects, lambda functions, etc... (just click to enable middleware); and</li><li>allocating workloads to multiple upstreams (backend capacity pools e.g. GCE, ECS, EC2).</li></ul><h3 id="example-of-a-multi-cloud-backend-fronted-by-flyio">Example of a multi-cloud backend fronted by Fly.io</h3><p>For one project I created a Fly.io "site" to front an application served up by Kubernetes in Google Compute Engine (GCE) and Elastic Container Service (ECS) simultaneously. Such a multi-cloud architecture is typically possible with any CDN, but here's an overview of the steps to do this with Fly.io.</p><ol><li><code>docker push</code> to upload my custom Docker image to the Elastic Container Registry (ECR)</li><li>configure the Kubernetes cluster to source that container image by registry address, name:tag, and publish the service port on a load balancer</li><li>configure AWS's ECS Fargate to source the image by name:tag (requires hosting the container image in ECR), and publish the service port on an Elastic Load Balancer (ELB)</li><li>create the Fly.io site with a backend of the Kubernetes load balancer address:port and ELB address:port</li></ol><p>A note about TLS (SSL): It's a great idea to require TLS everywhere. This gives greater assurance of data integrity even when confidentiality is a non-issue. Both GCE Kubernetes LBs and ELBs can issue and bind a free TLS server certificate. There's no need to request a certificate common name (CN) or subject alternative name (SAN) matching the domain name your clients/customers will "see". This is because the frontend provided by Fly.io will bind that familiar domain name when you verify the DNS hostname. The CN+SAN in the backend load balancers' server certificates are arbitrary and simply need to match the domain name generated by that platform for the particular service address e.g. example-service-2045107736.us-east-1.elb.amazonaws.com.</p><h2 id="example-of-a-personal-web-site-without-hosting-expenses">Example of a personal web site without hosting expenses</h2><p>I came across Fly.io by way of an email invitation for a free trial and have combined this with <a href="./keybase.html">the Keybase Filesystem</a> and the Pelican static HTML generator (described in <a href="./pages/about.html">About page</a>) to create this blog site which is highly secure, performant, highly available, and (for now) completely free of operational expenses!</p><hr/></section><section class="post-footer" style="margin: 12rem 0 0;"><aside class="post-tags"><a href="./tag/cdn.html">cdn</a><a href="./tag/devops.html">devops</a> </aside><div class="clear"></div><aside class="post-author"><figure class="post-author-avatar"><img alt="Kenneth Bingham" src="https://github.com/qrkourier/qrkourier.github.io/assets/1434400/a8155877-b78a-4ba0-895f-9396777f8b82"/></figure><div class="post-author-bio"><h4 class="post-author-name"><a href="./author/kenneth.html">Kenneth Bingham</a></h4><span class="post-author-location"><i class="icon icon-location"></i> United States</span><span class="post-author-website"><a href="https://linktr.ee/qrkourier"><i class="icon icon-link"></i> Links</a></span></div><div class="clear"></div></aside></section><aside class="post-nav"><div class="clear"></div></aside></div></article></main><div class="nav-footer"><nav aria-label="Footer" class="nav-wrapper"><span class="nav-copy">hella labs © 2023 </span><span class="nav-credits"><a class="menu-item js-theme" data-dark="Dark theme" data-light="Light theme" data-system="System theme" href="#"><span class="theme-icon"></span><span class="theme-text">System theme</span></a></span></nav></div></section><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script><script src="././js/jquery.fitvids.js" type="text/javascript"></script><script src="././js/script.js" type="text/javascript"></script><script>$(document).ready(function(){var viewport=$(window);var post=$('.post-content');post.fitVids();var mdSelector=".highlight pre";var rstSelector=".highlight pre";var selector=mdSelector;function codestyling(){$(selector).each(function(i,e){hljs.highlightElement(e);if(!$(this).hasClass('language-text')){var code=$(this);var lines=code.html().split(/\n(?!$)/g).length;var numbers=[];if(lines>1){lines++;}
for(i=1;i<lines;i++){numbers+='<span class="line" aria-hidden="true">'+i+'</span>';}
code.parent().append('<div class="lines">'+numbers+'</div>');}});}
function codestylingWithoutLineNumbers(){$(selector).each(function(i,e){hljs.highlightElement(e);});}
codestylingWithoutLineNumbers();function readingProgress(){var postBottom=post.offset().top+post.height();var viewportHeight=viewport.height();var progress=100-(((postBottom-(viewport.scrollTop()+viewportHeight)+viewportHeight/3)/(postBottom-viewportHeight+viewportHeight/3))*100);$('.progress-bar').css('width',progress+'%');(progress>100)?$('.progress-container').addClass('complete'):$('.progress-container').removeClass('complete');}
readingProgress();viewport.on({'scroll':function(){readingProgress();},'resize':function(){readingProgress();},'orientationchange':function(){readingProgress();}});});</script></body></html>